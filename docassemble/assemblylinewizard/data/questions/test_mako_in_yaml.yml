---
objects:
  - yaml_file: DAStaticFile.using(filename="data/sources/interview_structure.yml")
---
modules:
  - .interview_generator
---
code: |
  import ruamel.yaml as yaml
  import mako.template
  import mako.runtime
  mako.runtime.UNDEFINED = DAEmpty()
  
  my_blocks = list(yaml.safe_load_all(yaml_file.slurp()))
  
  mytemplate = mako.template.Template(my_blocks[0]['question'])
  mytemplate.imports = ["from docassemble.assemblylinewizard.interview_generator import *"]
  #content = ""
  data = {"question_text": "Some question",
          "block_id": fix_id("the id"),
         "fix_id": fix_id}
  content = mytemplate.render(**data)
  del mytemplate
---
mandatory: True
question: |
  Test
subquestion: |

  ${ fix_id("ABCdef") }
  <pre>
  ${ content }
  </pre>