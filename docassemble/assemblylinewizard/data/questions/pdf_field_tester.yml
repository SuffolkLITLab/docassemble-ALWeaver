---
modules:
  - .interview_generator
---
question: |
  Please upload a PDF template
  
fields:
  - File: template_upload
    datatype: file
---
objects:
  - placeholder_signature: DAStaticFile.using(filename='placeholder_signature.png')
---
code: |
  fields = template_upload.get_pdf_fields()
  signature_fields = [field[0] for field in fields if len(field) >4 and field[4] == '/Sig']
  checkbox_fields = [field[0] for field in fields if len(field) > 4 and field[4] == '/Btn']
---
comment: |
  This block was copied from assembly_line.yml
  
  Please update it if the assembly_line.yml is updated.
variable name: variables_to_skip
data:
  - signature_date
  - plaintiff
  - plaintiffs
  - defendant
  - defendants
  - petitioner
  - petitioners
  - witnesses
  - users
  - other_parties
  - children
---
question: |
  Field list
subquestion: |

  Field name (bold if reserved) | Field type | Mapped name field (if different)
  -----------|------------|-------------------
  % for field in fields:
  ${":exclamation-triangle: " if ' ' in field[0] else ''}${'**' + str(field[0]) + '**' if field[0] in variables_to_skip else field[0]} | ${'Signature' if field[4] == '/Sig' else 'Checkbox' if field[4] == '/Btn' else "Text" if field[4] == '/Tx' else ':skull-crossbones:'} (${field[4]}) | ${map_names(field[0]) if not (map_names(field[0]) == field[0]) else ''}
  % endfor

  The following are signature fields: ${comma_and_list(signature_fields)} 
  
  The following are checkbox fields: ${comma_and_list(checkbox_fields)}
  
  :exclamation-triangle: Indicates that the field name has a space in it. Please
  replace any spaces with underscores in the PDF field name before uploading to 
  Trello.
  
  :skull-crossbones: Indicates it's a field type that our interview generator
  does not currently handle. Please make sure the field is a checkbox, text 
  input, or digital signature field.

continue button field: field_list_display
mandatory: True
help: |
  % for field in fields:
  * ${field}
  % endfor
---
code: |
  signatures = [{field: placeholder_signature} for field in signature_fields]
  checkboxes = [{field: 'Yes'} for field in checkbox_fields]
  other_fields = [{field[0]: map_names(field[0])} for field in fields if not field[0] in signatures and not field[0] in checkbox_fields]
  pdf_fields = other_fields + checkboxes + signatures
---
mandatory: True
question: |
  Here is the filled-in PDF
subquestion: |
  The fields are filled in with the name that we'll use in the YAML file
  
  All checkboxes should be checked. If not, please check the field's
  "export" value. It should be set to "Yes".
  
  If the text is unusually sized, then please check the font size and 
  whether the field is set to allow multiple lines.
  
  All signature fields should be filled in with this image: ${placeholder_signature}
  
  ${my_pdf}
---
attachment:
  variable name: my_pdf
  pdf template file:
    code: |
      template_upload
  code: |
    pdf_fields